<!DOCTYPE html>
<html lang="ru" data-theme="">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞ ‚Äî BVB</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* —Ç–µ –∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ–º—ã, —á—Ç–æ –∏ –≤ index.html */
    :root{--bg:#f7fafc;--bg-2:#ffffff;--card:#ffffff;--muted:#5b6776;--text:#0b1220;--accent:#2563eb;--accent-2:#0ea5e9;--border:#e5e7eb;--shadow:0 10px 24px rgba(16,24,40,.08);--radius:16px;--maxw:1100px;--btn-on-primary:#fff;}
    [data-theme="dark"]{--bg:#0b1220;--bg-2:#0e1729;--card:#111a2e;--muted:#9fb0c8;--text:#e6eef9;--accent:#3b82f6;--accent-2:#38bdf8;--border:#1d2a44;--shadow:0 12px 34px rgba(0,0,0,.35)}
    *{box-sizing:border-box} html,body{margin:0;padding:0}
    body{font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Arial; background:var(--bg); color:var(--text)}
    .container{max-width:var(--maxw);margin:0 auto;padding:16px}
    header{position:sticky;top:0;z-index:20;background:var(--bg-2);border-bottom:1px solid var(--border);backdrop-filter:saturate(160%) blur(8px)}
    [data-theme="dark"] header{background:rgba(11,18,32,.85)}
    .nav{display:flex;justify-content:space-between;align-items:center;gap:8px}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border:1px solid var(--border);border-radius:12px;background:var(--bg-2);cursor:pointer}
    .btn.primary{background:linear-gradient(180deg,var(--accent),#1d4ed8);border:none;color:#fff}
    .grid{display:grid;grid-template-columns:1fr;gap:14px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow)}
    .pad{padding:16px}
    .p-img{width:100%;border-radius:16px;border:1px solid var(--border);object-fit:cover;background:#fff}
    .tag{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border-radius:999px;border:1px dashed var(--border);font-size:12px;color:var(--muted);background:var(--bg-2)}
    .muted{color:var(--muted)}
    @media (min-width:840px){ .grid{grid-template-columns:1.1fr 1fr} }
  </style>
</head>
<body>
  <header class="container nav">
    <a class="btn" href="index.html">‚Üê –ö–∞—Ç–∞–ª–æ–≥</a>
    <div style="display:flex;gap:8px">
      <button class="btn" id="theme-toggle">üåô –¢–µ–º–∞</button>
      <a class="btn" href="index.html#cart" id="open-cart">üß∫ –ö–æ—Ä–∑–∏–Ω–∞</a>
    </div>
  </header>

  <main class="container">
    <div id="body" class="grid">
      <!-- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
    </div>
  </main>

  <script>
  /* —Ç–µ–º–∞ */
  const applyTheme=(t)=>{ const el=document.documentElement; if(!t){t=localStorage.getItem('theme')|| (matchMedia('(prefers-color-scheme: dark)').matches?'dark':'light');} el.setAttribute('data-theme', t==='dark'?'dark':''); localStorage.setItem('theme',t); };
  applyTheme(); document.getElementById('theme-toggle').onclick=()=>{applyTheme(document.documentElement.getAttribute('data-theme')==='dark'?'light':'dark');};

  /* –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥–∞ –∫–∞–∫ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π */
  const CONFIG_DEFAULT={ products:[] };
  let CONFIG=JSON.parse(JSON.stringify(CONFIG_DEFAULT));
  async function loadRemote(){
    try{ const r=await fetch('shopConfig.json',{cache:'no-store'}); if(r.ok){ const j=await r.json(); CONFIG.products=j.products||[]; } }catch(e){}
    const local=localStorage.getItem('shopConfig'); if(local){ try{ const obj=JSON.parse(local); if(obj.products) CONFIG.products=obj.products; }catch(e){} }
  }
  const fmt=(n)=> new Intl.NumberFormat('ru-RU').format(n)+' ‚ÇΩ';

  function render(){
    const id=new URLSearchParams(location.search).get('id')||'';
    const p=CONFIG.products.find(x=>String(x.id)===String(id));
    const root=document.getElementById('body');
    if(!p){
      root.innerHTML=`<div class="card pad"><h2>–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω</h2><p class="muted">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Å—ã–ª–∫—É –∏–ª–∏ –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ <a href="index.html">–∫–∞—Ç–∞–ª–æ–≥</a>.</p></div>`;
      return;
    }
    root.innerHTML = `
      <div>
        <div class="card pad">
          <img class="p-img" src="${p.img}" alt="${p.title}" onerror="this.onerror=null;this.src='https://via.placeholder.com/900x600?text=–§–æ—Ç–æ';">
        </div>
      </div>
      <div>
        <div class="card pad">
          <h1 style="margin:0 0 6px">${p.title}</h1>
          <div class="tag" style="margin-bottom:10px">${p.tag||''}</div>
          <div style="font-size:22px;font-weight:800;margin:8px 0">${p.priceText || fmt(p.price||0)}</div>
          <p class="muted" style="margin:10px 0 14px">${p.desc||''}</p>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <a class="btn primary" id="add">–í –∫–æ—Ä–∑–∏–Ω—É</a>
            <a class="btn" href="index.html#wholesale">–û–ø—Ç–æ–≤–∞—è –∑–∞—è–≤–∫–∞</a>
            <a class="btn" href="https://t.me/bvbvbabab" target="_blank">–ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram</a>
          </div>
        </div>
        <div class="card pad" style="margin-top:12px">
          <h3 style="margin:0 0 6px">–î–æ—Å—Ç–∞–≤–∫–∞ –∏ –æ–ø–ª–∞—Ç–∞</h3>
          <p class="muted">–î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –†–§. –û–ø–ª–∞—Ç–∞ –Ω–∞–ª–∏—á–Ω—ã–º–∏/–ø–µ—Ä–µ–≤–æ–¥–æ–º. –£—Ç–æ—á–Ω—è–π—Ç–µ –¥–µ—Ç–∞–ª–∏ —É –º–µ–Ω–µ–¥–∂–µ—Ä–∞.</p>
        </div>
      </div>
    `;
    document.getElementById('add').onclick=(e)=>{
      e.preventDefault();
      // —Å–∫–ª–∞–¥—ã–≤–∞–µ–º –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –∫–æ—Ä–∑–∏–Ω—É —Ç–∞–∫ –∂–µ, –∫–∞–∫ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
      const cart=JSON.parse(localStorage.getItem('shopCart')||'[]');
      const i=cart.findIndex(x=>x.id===p.id); if(i>-1){cart[i].qty++;} else {cart.push({id:p.id,title:p.title,price:p.price||0,img:p.img,qty:1});}
      localStorage.setItem('shopCart', JSON.stringify(cart));
      location.href='index.html#cart'; // –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –∫–æ—Ä–∑–∏–Ω–∞ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
    };
  }

  (async()=>{ await loadRemote(); render(); })();
  </script>
</body>
</html>
