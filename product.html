
<!doctype html><html lang="ru"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>–¢–æ–≤–∞—Ä ‚Äî BVB</title>
<link rel="icon" href="logo.png"><link rel="stylesheet" href="style.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head><body>
<header>
  <div class="container nav">
    <div class="brand"><img src="logo.png" alt="BVB"><div><h1>BVB</h1><div class="small">–ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞</div></div></div>
    <div class="actions">
      <a class="btn" href="index.html#catalog">–ö–∞—Ç–∞–ª–æ–≥</a>
      <a class="btn" href="wholesale.html">–û–ø—Ç</a>
      <button id="theme-toggle" class="btn icon" aria-label="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É">üåì</button>
      <button class="btn" id="cart-btn">üß∫ <span id="cart-count">0</span></button>
    </div>
  </div>
</header>

<main class="container">
  <article id="view" class="card pad"></article>
</main>

<!-- Cart modal (reuse) -->
<div id="cart-modal" class="modal" aria-hidden="true">
  <div class="sheet">
    <div class="head">
      <div style="font-weight:700">–ö–æ—Ä–∑–∏–Ω–∞</div>
      <button class="btn icon" onclick="closeCart()">‚úñÔ∏è</button>
    </div>
    <div class="body">
      <div id="cart-body"></div>
      <div class="sep"></div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
        <input id="co-name" placeholder="–í–∞—à–µ –∏–º—è">
        <input id="co-phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
      </div>
      <div class="total"><span>–ò—Ç–æ–≥–æ</span><span id="cart-total">0 ‚ÇΩ</span></div>
      <div style="margin-top:10px;display:flex;gap:8px;justify-content:flex-end">
        <button class="btn" onclick="closeCart()">–ó–∞–∫—Ä—ã—Ç—å</button>
        <button class="btn primary" onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
      </div>
    </div>
  </div>
</div>

<footer class="container"><div class="small">¬© <span id="year"></span> BVB</div></footer>

<script src="common.js"></script>
<script>
(async function(){
  document.getElementById('year').textContent = new Date().getFullYear();
  Shop.themeInit(); Shop.renderCartBadge();
  document.getElementById('cart-btn').addEventListener('click',(e)=>{e.preventDefault();openCart();});

  const params = new URLSearchParams(location.search);
  const slug = params.get('slug')||'';
  try{
    const cfg = await Shop.loadConfig();
    const prod = (cfg.products||[]).find(p => (p.slug||Shop.slugify(p.title))===slug);
    const el = document.getElementById('view');
    if(!prod){ el.innerHTML='<div class="small">–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω. <a href="index.html#catalog">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥</a></div>'; return; }

    el.innerHTML = `
      <div class="grid">
        <div class="card pad" style="grid-column:span 6">
          <img src="${prod.img}" alt="${prod.title}" style="width:100%;border-radius:12px;border:1px solid var(--accent);object-fit:cover">
        </div>
        <div style="grid-column:span 6">
          <h2 style="margin-top:0">${prod.title}</h2>
          <div class="tag">${prod.tag||''}</div>
          <div class="price" style="margin:10px 0 16px;font-size:18px">${prod.price}</div>
          <p class="small">${prod.desc||''}</p>
          <div style="display:flex;gap:8px;margin-top:12px;flex-wrap:wrap">
            <button class="btn primary" id="add">–í –∫–æ—Ä–∑–∏–Ω—É</button>
            ${prod.avito ? `<a class="btn" target="_blank" href="${prod.avito}">–°–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –ê–≤–∏—Ç–æ</a>`:''}
          </div>
        </div>
      </div>
    `;
    document.getElementById('add').addEventListener('click',()=>{
      Shop.addToCart({title:prod.title, price:prod.price, img:prod.img, qty:1});
      openCart();
    });
  }catch(e){
    document.getElementById('view').innerHTML='<div class="small">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö.</div>';
  }
})();
</script>
</body></html>
