<!DOCTYPE html>
<html lang="ru" data-theme="">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>BVB ‚Äî –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç</title>
<meta name="description" content="–ö–∞—Ç–∞–ª–æ–≥, –∫–æ—Ä–∑–∏–Ω–∞, –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –∏ –æ–ø—Ç–æ–≤—ã–µ –∑–∞—è–≤–∫–∏.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
/* –°–æ—Ü-–∫–Ω–æ–ø–∫–∏ —Å–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ SVG */
.socials a { display:inline-flex; align-items:center; gap:8px; }
.socials a svg { width:18px; height:18px; flex:0 0 18px; display:block; }
:root{--bg:#f7fafc;--bg-2:#ffffff;--card:#ffffff;--muted:#5b6776;--text:#0b1220;--accent:#2563eb;--accent-2:#38bdf8;--border:#e5e7eb;--shadow:0 10px 24px rgba(16,24,40,.08);--radius:16px;--maxw:1100px}
[data-theme="dark"]{--bg:#0b1220;--bg-2:#0e1729;--card:#111a2e;--muted:#9fb0c8;--text:#e6eef9;--accent:#3b82f6;--accent-2:#38bdf8;--border:#1d2a44;--shadow:0 12px 34px rgba(0,0,0,.35)}
*{box-sizing:border-box}html,body{margin:0;padding:0}
body{font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text);line-height:1.6}
a{color:var(--text);text-decoration:none}
.container{max-width:var(--maxw);margin:0 auto;padding:16px}
header{position:sticky;top:0;z-index:20;background:var(--bg-2);border-bottom:1px solid var(--border);backdrop-filter:saturate(150%) blur(8px)}
[data-theme="dark"] header{background:rgba(14,23,41,.9)}
.nav{display:flex;align-items:center;justify-content:space-between;gap:8px}
.brand{display:flex;align-items:center;gap:10px}
.logo{width:40px;height:40px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#1d4ed8);display:grid;place-items:center;color:#fff}
.nav-actions{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border:1px solid var(--border);border-radius:12px;background:var(--bg-2);cursor:pointer;color:var(--text)}
.btn.primary{background:linear-gradient(180deg,var(--accent),#1d4ed8);border:none;color:#fff}
.btn.ghost{background:transparent}
#cart-btn{position:relative}
#cart-count{position:absolute;top:-6px;right:-6px;background:var(--accent-2);color:#06101e;border-radius:999px;font-size:11px;min-width:18px;height:18px;display:grid;place-items:center;border:1px solid #0b1729}
.hero{padding:34px 0 14px}
.hero .title{font-size:32px;line-height:1.12;margin:0 0 8px}
.hero .subtitle{color:var(--muted);max-width:760px;margin:0 0 14px}
.badge{font-size:13px;color:var(--muted)}
.card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow)}
.pad{padding:16px}
.grid{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
.product{grid-column:span 6;display:flex;gap:12px}
.product img{width:116px;height:116px;border-radius:12px;object-fit:cover;border:1px solid var(--border)}
.tag{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border-radius:999px;border:1px dashed var(--border);font-size:12px;color:var(--muted)}
.price{font-weight:700}
@media (max-width:719px){.product{grid-column:span 12}.hero .title{font-size:26px}}
/* Cart modal */
.modal{position:fixed;inset:0;display:none;align-items:flex-start;justify-content:center;background:rgba(0,0,0,.45);padding:20px;z-index:50}
.modal.open{display:flex}
.sheet{width:min(900px,100%);background:var(--card);border:1px solid var(--border);border-radius:20px;box-shadow:var(--shadow);padding:16px}
.sheet h3{margin:0 0 10px}
.cart-list{display:grid;gap:12px}
.cart-row{display:grid;grid-template-columns:64px 1fr auto auto auto;gap:10px;align-items:center;border-bottom:1px dashed var(--border);padding-bottom:10px}
.cart-row img{width:64px;height:64px;border-radius:12px;object-fit:cover;border:1px solid var(--border)}
.qty{display:inline-flex;border:1px solid var(--border);border-radius:10px;overflow:hidden}
.qty button{background:var(--bg-2);border:0;padding:8px 10px;cursor:pointer;color:var(--text)}
.qty input{width:46px;text-align:center;background:var(--bg-2);border:0;color:var(--text)}
.total{display:flex;justify-content:space-between;align-items:center;border-top:1px solid var(--border);padding-top:12px;margin-top:8px}
.form-mini{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:8px}
.form-mini input{padding:12px;background:var(--bg-2);border:1px solid var(--border);border-radius:12px;color:var(--text)}
.form-mini textarea{grid-column:span 2;min-height:80px;padding:12px;background:var(--bg-2);border:1px solid var(--border);border-radius:12px;color:var(--text)}
/* footer */
footer{border-top:1px solid var(--border);padding:24px 0;color:var(--muted)}
.small{font-size:12px}
/* socials */
.socials{display:flex;gap:8px;flex-wrap:wrap}
.socials a{padding:10px 12px;border:1px solid var(--border);border-radius:12px;display:inline-flex;align-items:center;gap:8px}
</style>
</head>
<body>
<header>
  <div class="container nav">
    <div class="brand">
      <div class="logo">üõçÔ∏è</div>
      <div><div id="brand-name" style="font-weight:700">BVB</div><div id="brand-tag" class="badge">–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –º–∞–≥–∞–∑–∏–Ω–∞</div></div>
    </div>
    <div class="nav-actions">
      <a class="btn ghost" href="#catalog">–ö–∞—Ç–∞–ª–æ–≥</a>
      <a class="btn ghost" href="#wholesale">–û–ø—Ç</a>
      <button class="btn" id="theme-toggle">üåô –¢–µ–º–∞</button>
      <a class="btn" href="admin.html">üîß –ê–¥–º–∏–Ω–∫–∞</a>
      <a class="btn" id="cart-btn" href="#cart">üß∫ –ö–æ—Ä–∑–∏–Ω–∞ <span id="cart-count">0</span></a>
    </div>
  </div>
</header>

<main class="container" id="app">
  <section class="hero">
    <h1 class="title" id="hero-title">–õ—É—á—à–∏–µ —Ç–æ–≤–∞—Ä—ã –ø–æ —á–µ—Å—Ç–Ω—ã–º —Ü–µ–Ω–∞–º</h1>
    <p class="subtitle" id="hero-sub">–ú—ã —Ç—â–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–±–∏—Ä–∞–µ–º –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–∫–∞–∑—ã –ø–æ –≤—Å–µ–π —Å—Ç—Ä–∞–Ω–µ. –î–ª—è –æ–ø—Ç–æ–≤—ã—Ö –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è.</p>
    <div class="nav-actions" style="margin:10px 0">
      <a class="btn primary" href="#catalog">–°–º–æ—Ç—Ä–µ—Ç—å –∫–∞—Ç–∞–ª–æ–≥</a>
      <a class="btn" href="#wholesale">–û—Å—Ç–∞–≤–∏—Ç—å –æ–ø—Ç–æ–≤—É—é –∑–∞—è–≤–∫—É</a>
    </div>
    <div class="badge">–ü–∏—à–∏—Ç–µ –Ω–∞–º: <a id="contact-email" href="mailto:sales@example.com">sales@example.com</a> ‚Ä¢ <span id="contact-phone">+7 (900) 000-00-00</span></div>
  </section>

  <section class="card pad">
    <div class="socials" id="socials"></div>
  </section>

  <section id="catalog" class="grid" style="margin:14px 0" ></section>

  <section id="wholesale" class="card pad" style="margin:14px 0">
    <h3 style="margin:0 0 8px">–û–ø—Ç–æ–≤–∞—è –∑–∞—è–≤–∫–∞</h3>
    <p class="badge">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É ‚Äî –º—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –ø–æ –æ–ø—Ç–æ–≤–æ–π –ø–∞—Ä—Ç–∏–∏.</p>
    <form id="wholesale-form">
      <div class="form-mini">
        <input required name="name" placeholder="–í–∞—à–µ –∏–º—è">
        <input required name="email" type="email" placeholder="Email">
        <input required name="phone" placeholder="+7 ...">
        <input name="company" placeholder="–ö–æ–º–ø–∞–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)">
        <textarea required name="message" placeholder="–¢–æ–≤–∞—Ä/–æ–±—ä—ë–º, —Å—Ä–æ–∫ –ø–æ—Å—Ç–∞–≤–∫–∏..."></textarea>
      </div>
      <div class="nav-actions" style="margin-top:8px">
        <button class="btn primary" type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
        <span id="form-status" class="badge"></span>
      </div>
    </form>
  </section>
</main>

<footer class="container">
  <div class="grid">
    <div class="card pad" style="grid-column:span 12">
      <div class="small">¬© <span id="year"></span> <span id="footer-name">BVB</span>. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã. ‚Ä¢ –ò–ù–ù: <span id="footer-inn">0000000000</span> ‚Ä¢ –û–ì–†–ù: <span id="footer-ogrn">0000000000000</span></div>
    </div>
  </div>
</footer>

<!-- Cart modal -->
<div class="modal" id="cart-modal" aria-hidden="true">
  <div class="sheet">
    <div class="nav-actions" style="justify-content:space-between">
      <h3 style="margin:0">üß∫ –ö–æ—Ä–∑–∏–Ω–∞</h3>
      <div class="nav-actions">
        <button class="btn" id="cart-clear">–û—á–∏—Å—Ç–∏—Ç—å</button>
        <button class="btn" id="cart-close">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
    <div id="cart-list" class="cart-list" style="margin-top:8px"></div>
    <div class="form-mini">
      <input id="order-name" placeholder="–í–∞—à–µ –∏–º—è">
      <input id="order-phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è —Å–≤—è–∑–∏">
      <textarea id="order-comment" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É (–∞–¥—Ä–µ—Å, –ø–æ–∂–µ–ª–∞–Ω–∏—è)..."></textarea>
    </div>
    <div class="total">
      <div><b>–ö–æ–ª-–≤–æ:</b> <span id="cart-items-count">0</span> ‚Ä¢ <b>–ò—Ç–æ–≥–æ:</b> <span id="cart-total">0 ‚ÇΩ</span></div>
      <button class="btn primary" id="checkout">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
    </div>
    <div class="badge" style="margin-top:6px">–ü–æ—Å–ª–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –º—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ Telegram/–ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.</div>
  </div>
</div>

<script>
/* ====== –¢–ï–ú–ê ====== */
const applyTheme=(t)=>{const el=document.documentElement;if(!t){t=localStorage.getItem('theme')||(matchMedia('(prefers-color-scheme: dark)').matches?'dark':'light');}el.setAttribute('data-theme',t==='dark'?'dark':'');localStorage.setItem('theme',t);}
applyTheme(); document.getElementById('theme-toggle').onclick=()=>applyTheme(document.documentElement.getAttribute('data-theme')==='dark'?'light':'dark');

/* ====== –£–¢–ò–õ–´ ====== */
const $=(s,el=document)=>el.querySelector(s); const formatMoney=n=> (n||0).toLocaleString('ru-RU')+' ‚ÇΩ';
const slug=s=>s.toString().toLowerCase().trim().replace(/\s+/g,'-').replace(/[^\w-]+/g,'');

/* ====== –ö–û–ù–§–ò–ì ====== */
const DEF={name:'BVB',tag:'–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –º–∞–≥–∞–∑–∏–Ω–∞',email:'sales@example.com',phone:'+7 (900) 000-00-00',inn:'',ogrn:'',socials:[],telegram:null,products:[]};
let CONFIG = {...DEF};
async function loadConfig(){
  try{const r=await fetch('shopConfig.json',{cache:'no-store'}); if(r.ok){CONFIG={...CONFIG,...await r.json()};}}
  catch(e){}
  const loc=localStorage.getItem('shopConfig'); if(loc){try{CONFIG={...CONFIG,...JSON.parse(loc)};}catch(e){}}
}
function hydrateTexts(){
  $('#brand-name').textContent=CONFIG.name; $('#footer-name').textContent=CONFIG.name;
  $('#brand-tag').textContent=CONFIG.tag; $('#hero-title').textContent='–õ—É—á—à–∏–µ —Ç–æ–≤–∞—Ä—ã –ø–æ —á–µ—Å—Ç–Ω—ã–º —Ü–µ–Ω–∞–º';
  $('#contact-email').textContent=CONFIG.email; $('#contact-email').href='mailto:'+CONFIG.email;
  $('#contact-phone').textContent=CONFIG.phone; $('#footer-inn').textContent=CONFIG.inn||'‚Äî'; $('#footer-ogrn').textContent=CONFIG.ogrn||'‚Äî';
  $('#year').textContent=new Date().getFullYear();
}
function renderSocials(){
  const wrap=$('#socials'); wrap.innerHTML='';
  const icon=(n)=>({telegram:'üì®',whatsapp:'üü¢',avito:'üÖ∞Ô∏è'}[n]||'üîó');
  (CONFIG.socials||[]).forEach(s=>{const a=document.createElement('a'); a.href=s.url; a.target='_blank'; a.rel='noopener'; a.innerHTML=`${icon(s.icon)} ${s.label}`; wrap.appendChild(a)});
}
function renderCatalog(){
  const grid=$('#catalog'); grid.innerHTML='';
  (CONFIG.products||[]).forEach(p=>{
    const el=document.createElement('article'); el.className='card pad product';
    const priceText=p.priceText || (p.price?formatMoney(p.price):'');
    el.innerHTML=`
      <img src="${p.img}" alt="${p.title}">
      <div style="flex:1">
        <h3 style="margin:0 0 6px">${p.title}</h3>
        <div class="tag" style="margin-bottom:6px">${p.tag||''}</div>
        <div class="price">${priceText}</div>
        <div class="nav-actions" style="margin-top:8px">
          <button class="btn primary" data-add>–í –∫–æ—Ä–∑–∏–Ω—É</button>
          <a class="btn" href="product.html?id=${encodeURIComponent(p.id||slug(p.title))}">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
        </div>
      </div>`;
    el.querySelector('[data-add]').onclick=()=>addToCart(p.id||slug(p.title),1);
    grid.appendChild(el);
  });
}

/* ====== –ö–û–†–ó–ò–ù–ê ====== */
const CART_KEY='shopCart';
let cart = JSON.parse(localStorage.getItem(CART_KEY)||'[]'); // [{id,qty}]
const saveCart=()=>{localStorage.setItem(CART_KEY,JSON.stringify(cart)); renderCartBadge();}
const countCart=()=>cart.reduce((s,i)=>s+i.qty,0);
const addToCart=(id,qty=1)=>{const row=cart.find(i=>i.id===id); if(row) row.qty+=qty; else cart.push({id,qty}); saveCart(); openCart();}
const removeFromCart=(id)=>{cart=cart.filter(i=>i.id!==id); saveCart(); renderCart();}
const changeQty=(id,delta)=>{const r=cart.find(i=>i.id===id); if(!r) return; r.qty=Math.max(1,r.qty+delta); saveCart(); renderCart();}
const renderCartBadge=()=>{$('#cart-count').textContent=countCart();}
function mapById(arr){const m={}; (arr||[]).forEach(p=>m[p.id||slug(p.title)]=p); return m;}
function openCart(){ $('#cart-modal').classList.add('open'); renderCart();}
function closeCart(){ $('#cart-modal').classList.remove('open');}
$('#cart-btn').onclick=(e)=>{e.preventDefault(); openCart();}; $('#cart-close').onclick=closeCart; $('#cart-clear').onclick=()=>{cart=[]; saveCart(); renderCart();};

function renderCart(){
  const list=$('#cart-list'); list.innerHTML='';
  const byId=mapById(CONFIG.products); let total=0;
  cart.forEach(row=>{
    const p=byId[row.id]; if(!p) return;
    const price=p.price||0; total+=price*row.qty;
    const priceText=p.priceText || (p.price?formatMoney(p.price):'');
    const div=document.createElement('div'); div.className='cart-row';
    div.innerHTML=`
      <img src="${p.img}" alt="">
      <div><div style="font-weight:600">${p.title}</div><div class="badge">${priceText} –∑–∞ —à—Ç.</div></div>
      <div class="qty"><button data-m>-</button><input value="${row.qty}" readonly><button data-p>+</button></div>
      <div style="font-weight:700">${formatMoney((p.price||0)*row.qty)}</div>
      <button class="btn" data-x>√ó</button>`;
    div.querySelector('[data-m]').onclick=()=>changeQty(row.id,-1);
    div.querySelector('[data-p]').onclick=()=>changeQty(row.id,1);
    div.querySelector('[data-x]').onclick=()=>removeFromCart(row.id);
    list.appendChild(div);
  });
  $('#cart-items-count').textContent=countCart();
  $('#cart-total').textContent=formatMoney(total);
}
renderCartBadge();

async function tgSend(text){
  if(!CONFIG.telegram || !CONFIG.telegram.token || !CONFIG.telegram.chat_id){ alert('–¢–µ–ª–µ–≥—Ä–∞–º –¥–ª—è –∑–∞–∫–∞–∑–æ–≤ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω. –ó–∞–∫–∞–∑ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä.'); navigator.clipboard.writeText(text); return;}
  const res = await fetch(`https://api.telegram.org/bot${CONFIG.telegram.token}/sendMessage`, {
    method:'POST', headers:{'Content-Type':'application/json'},
    body:JSON.stringify({chat_id:CONFIG.telegram.chat_id, text, parse_mode:'HTML'})
  });
  if(!res.ok){ const t=await res.text(); alert('–û—à–∏–±–∫–∞ Telegram: '+t); }
}

$('#checkout').onclick=async()=>{
  if(!cart.length){ alert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞'); return; }
  const name=$('#order-name').value.trim(); const phone=$('#order-phone').value.trim(); const comment=$('#order-comment').value.trim();
  if(!name||!phone){ alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω'); return; }
  const byId=mapById(CONFIG.products);
  const lines = cart.map((r,i)=>{const p=byId[r.id]; return `${i+1}. ${p?p.title:r.id} ‚Äî ${p?.priceText||formatMoney(p?.price||0)} √ó ${r.qty}`}).join('\n');
  const total = $('#cart-total').textContent;
  const text = `<b>–ù–æ–≤—ã–π –∑–∞–∫–∞–∑</b>\n${lines}\n\n–ò—Ç–æ–≥–æ: ${total}\n–ò–º—è: ${name}\n–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}\n–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ${comment||'-'}`;
  await tgSend(text); cart=[]; saveCart(); closeCart(); alert('–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏.');
};

/* ====== –û–ü–¢–û–í–ê–Ø –§–û–†–ú–ê (–ø—Ä–æ—Å—Ç–æ –≤ TG) ====== */
$('#wholesale-form').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const fd=new FormData(e.target);
  const text = `<b>–û–ø—Ç–æ–≤–∞—è –∑–∞—è–≤–∫–∞</b>\n–ò–º—è: ${fd.get('name')}\nEmail: ${fd.get('email')}\n–¢–µ–ª–µ—Ñ–æ–Ω: ${fd.get('phone')}\n–ö–æ–º–ø–∞–Ω–∏—è: ${fd.get('company')||'-'}\n\n–°–æ–æ–±—â–µ–Ω–∏–µ:\n${fd.get('message')}`;
  await tgSend(text); $('#form-status').textContent='–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!'; e.target.reset();
});

/* ====== INIT ====== */
(async()=>{
  await loadConfig();
  hydrateTexts(); renderSocials(); renderCatalog();
})();
</script>
</body>
</html>
